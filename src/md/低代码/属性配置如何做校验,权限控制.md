---
title: 属性配置校验和权限控制
category: 低代码
tags: [低代码, 面试题, 核心特性, 属性配置校验, 属性配置权限控制]
description: 属性配置校验和权限控制，都是基于 propsSchema 的规则驱动：校验保证“值合法”，权限保证“人能不能配”。
date: 2026-02-09
---

# 一、一句话总览（先把面试官稳住）

> **属性配置的校验和权限控制，都是基于 propsSchema 的规则驱动：
> 校验保证“值合法”，权限保证“人能不能配”。**

---

# 二、属性校验怎么做（Validation）

## 1️⃣ 校验放在哪一层？（非常关键）

**标准回答：**

* 校验定义在 **propsSchema**
* 校验执行在 **属性配置面板**
* 最终兜底校验在 **运行时 / 保存时**

> 面试官爱听：
> **“前端即时校验 + 后端 / 运行时兜底”**

---

## 2️⃣ propsSchema 中如何定义校验规则？

### 常见校验规则类型

```ts
const propsSchema = {
  maxLength: {
    label: '最大长度',
    type: 'number',
    required: true,
    rules: [
      { type: 'required', message: '必填' },
      { type: 'number', min: 1, max: 100 }
    ]
  }
}
```

| 规则类型      | 说明    |
| --------- | ----- |
| required  | 必填    |
| min / max | 范围    |
| pattern   | 正则    |
| enum      | 枚举    |
| custom    | 自定义函数 |

---

## 3️⃣ 自定义校验怎么做？（高分）

```ts
{
  validator: (value, props, context) => {
    return value > props.min
  },
  message: '必须大于最小值'
}
```

**关键词一定要说：**

* 当前属性
* 其他属性
* 运行时上下文

---

## 4️⃣ 表达式属性怎么校验？

> 面试官必追问点 ❗

**稳答：**

* 区分值类型：

  * literal（字面量）
  * expression（表达式）
* 表达式只做**语法校验**
* 不做运行结果校验

```ts
valueType: 'expression'
```

**加一句直接封神：**

> 表达式的正确性应该由运行时保障，而不是配置时执行

---

## 5️⃣ 什么时候触发校验？

**标准回答：**

* 即时校验（onChange）
* 提交校验（保存 Schema）
* 发布校验（上线前）

---

# 三、权限控制怎么做（Permission）

## 1️⃣ 权限控制的核心对象是谁？

**不是组件，是属性本身。**

```ts
{
  label: '接口地址',
  permission: ['admin', 'developer']
}
```

---

## 2️⃣ 权限控制在哪一层生效？

| 层级   | 控制内容   |
| ---- | ------ |
| UI 层 | 是否展示   |
| 交互层  | 是否可编辑  |
| 保存层  | 是否允许修改 |

> 面试官最喜欢听：
> **“权限不是只靠隐藏 UI”**

---

## 3️⃣ propsSchema 中如何声明权限？

### 方式一：角色控制（最常见）

```ts
permission: {
  roles: ['admin']
}
```

### 方式二：能力点控制（高级）

```ts
permission: {
  abilities: ['edit:dataSource']
}
```

---

## 4️⃣ 只读 vs 不可见（一定要区分）

| 状态              | 说明    |
| --------------- | ----- |
| visible = false | 完全不可见 |
| disabled = true | 可见不可改 |

```ts
visible: (context) => context.role === 'admin'
disabled: (context) => context.readonly
```

---

## 5️⃣ 不同环境的权限差异（真实项目）

**例子：**

* 开发环境：可改
* 生产环境：只读

```ts
disabled: ({ env }) => env === 'prod'
```

---

# 四、校验 + 权限的联动（加分点）

### 场景：无权限字段是否校验？

**标准答法：**

* 不可见字段：不校验
* 只读字段：参与校验

> 原因：
> **只读字段仍然是 Schema 的一部分**

---

# 五、真实工程中的兜底策略（P7 加分）

### 1️⃣ 保存时二次校验

* 防止绕过 UI 修改 Schema

### 2️⃣ 后端再校验

* 防止非法 Schema 入库

### 3️⃣ 发布前 Schema Lint

* 提前发现风险

---

# 六、终极总结句（你可以直接背）

> **校验解决的是“配得对不对”，
> 权限解决的是“配不配得了”，
> 二者都应该由 Schema 驱动，而不是写死在 UI 里。**

---

## 七、如果面试官还不放人 😈

我还能继续带你打：

* 🧠 **追问：权限规则动态变化怎么处理？**
* 🛠️ **手写一个 propsSchema 校验引擎（几十行）**
* 📄 **简历中“设计低代码校验与权限系统”的一句话表述**

你想继续 **追问模拟**，还是直接 **上代码级实现**？
